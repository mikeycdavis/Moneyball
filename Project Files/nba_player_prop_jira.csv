Issue Type,Issue ID,Parent,Summary,Description,Priority,Story Points,Labels
Epic,MBALL-300,,Player Data Layer Foundation,"Core database schema and entity framework. Covers Players, PlayerSeasonStats, PlayerGameStats, MLPlayerModels tables, entities, DTOs, and repositories.",Critical,21,"player-data,data-layer"
Epic,MBALL-310,,Player Data Ingestion Pipeline,"Full ingestion pipeline from SportRadar API into SQL Server. Covers API integration, player ingestion service, season stats aggregation, minutes parser, and DNP handling.",Critical,34,"ingestion,sportradar,pipeline"
Epic,MBALL-320,,Feature Engineering Framework,"All ML features computed and validated. Rolling averages, home/away splits, rest days, opponent defense, pace and usage proxies.",High,21,"feature-engineering,ml"
Epic,MBALL-330,,Multi-Model ML Framework,"Multi-model training and comparison system. Linear Regression, Random Forest, XGBoost, LightGBM, cross-validation, hyperparameter tuning, model persistence.",Critical,55,"ml,models,training"
Epic,MBALL-340,,Prediction API & Integration,"Prediction endpoints live. Single and batch predictions, caching, confidence scoring, fallback strategy.",High,34,"api,prediction,integration"
Epic,MBALL-350,,Testing & Quality Assurance,"90%+ unit test coverage achieved. All entity, ingestion, calculator, ML pipeline, and API integration tests passing.",High,21,"testing,qa,unit-tests"
Epic,MBALL-360,,Documentation & Deployment,"Technical documentation, database migration scripts, Python environment setup, and monitoring dashboard.",Medium,13,"documentation,deployment,monitoring"
Story,MBALL-301,MBALL-300,Design and Implement Player Database Schema,"Create Players, PlayerSeasonStats, PlayerGameStats, and MLPlayerModels tables with all constraints, computed columns, indexes, and foreign keys. Write migration script with rollback.",Critical,8,"database,schema,sprint-1"
Story,MBALL-302,MBALL-300,Create Player Entity Classes and DTOs,"Create Player, PlayerSeasonStat, PlayerGameStat, MLPlayerModel entities matching schema. Create PlayerProfileDto, SeasonStatsDto, GameBoxscoreDto, PlayerGameStatsDto for SportRadar API ingestion. Configure EF Core mappings.",Critical,5,"entities,dto,sprint-1"
Story,MBALL-303,MBALL-300,Implement Player Repository Interfaces,"Define IPlayerRepository, IPlayerGameStatsRepository, IMLPlayerModelRepository with async methods. Implement concrete repository classes and register in DI container.",High,5,"repository,interfaces,sprint-1"
Story,MBALL-304,MBALL-300,Build ML_PlayerFeatures View,"SQL view generating rolling averages (L3, L5, L10), season averages, home/away splits, rest days, B2B flag, opponent context, pace proxy. Excludes DNPs. Optimized for training queries.",High,8,"sql,view,feature-engineering,sprint-2"
Story,MBALL-305,MBALL-300,Create Derived Stat Calculator Utility,"DerivedStatCalculator class with IsDoubleDouble, IsTripleDouble, CalculateRollingAverage methods. Excludes DNPs, handles edge cases. Comprehensive unit tests.",Medium,3,"calculator,utilities,sprint-1"
Story,MBALL-306,MBALL-300,Build DraftKings Fantasy Calculator,"DraftKingsFantasyCalculator with CalculateFantasyScore and ProjectFantasyScore methods. Correct point values, double-double and triple-double bonuses. Probability-weighted projections.",Medium,3,"calculator,draftkings,sprint-2"
Story,MBALL-311,MBALL-310,Implement SportRadar Player API Integration,"Add SportRadar player endpoints: GetNBAPlayersAsync, GetPlayerProfileAsync, GetPlayerSeasonStatsAsync, GetGameBoxscoreAsync. Rate limiting (1 req/sec), circuit breaker, retry with exponential backoff.",Critical,8,"sportradar,api,integration,sprint-2"
Story,MBALL-312,MBALL-310,Build Player Ingestion Service,"PlayerIngestionService with IngestNBAPlayersAsync (upsert all players) and IngestPlayerGameStatsAsync (date range). Idempotent, handles DNPs, transaction per game.",Critical,13,"ingestion,service,sprint-3"
Story,MBALL-313,MBALL-310,Create Season Stats Aggregation Job,"SeasonStatsAggregator aggregating game stats into season averages. Calculates shooting percentages, double/triple-double counts, DraftKings score. Handles trades. Runs nightly or on-demand.",High,8,"aggregation,season-stats,sprint-3"
Story,MBALL-314,MBALL-310,Build Minutes Parser Utility,"MinutesParser static class parsing MM:SS format. Handles edge cases (0:30, 48:00, empty, null, invalid). Returns (minutes, seconds) tuple with robust error handling.",Medium,2,"parser,utilities,sprint-3"
Story,MBALL-315,MBALL-310,Implement DNP Handling Logic,DidNotPlay flag and DNPReason fields. Parse Played/Not_Playing_Reason from API. Exclude DNP games from rolling and season averages. Zero all stats for DNP records.,Medium,3,"dnp,ingestion,sprint-3"
Story,MBALL-321,MBALL-320,Build Rolling Average Calculator,"Extend ML_PlayerFeatures view with Points/Rebounds/Assists/3PM/Minutes L3, L5, L10 averages using SQL window functions. Excludes DNPs. Handles players with fewer than N games.",Critical,5,"rolling-averages,sql,sprint-4"
Story,MBALL-322,MBALL-320,Calculate Home/Away Splits,"HomeSplits CTE calculating Points_HomeAvg, Points_AwayAvg and equivalent splits for all target stats. Current game IsHomeGame flag included.",High,3,"home-away,splits,sprint-4"
Story,MBALL-323,MBALL-320,Compute Rest Days and Back-to-Back,RestDays CTE using LAG to compute DaysSinceLastGame. IsBackToBack = 1 when days <= 1. Handles NULL for first game of season.,Medium,3,"rest-days,b2b,sprint-4"
Story,MBALL-324,MBALL-320,Add Opponent Defensive Stats,OpponentDefense CTE calculating opponent's average points/rebounds/assists allowed by position. Joined on OpponentTeamId and PlayerPosition. Available as ML features.,Medium,5,"opponent-defense,feature-engineering,sprint-4"
Story,MBALL-325,MBALL-320,Calculate Pace Proxy,Add TotalScore (HomeScore + AwayScore) to GameContext CTE as pace proxy. Available as OpponentPace feature for all completed games.,Low,2,"pace,feature-engineering,sprint-4"
Story,MBALL-326,MBALL-320,Add Usage Proxy Placeholder,UsageRate approximation column: (FGA + 0.44 * FTA) / MinutesPlayed. Documented as approximation with TODO for true usage rate formula.,Low,3,"usage,feature-engineering,sprint-4"
Story,MBALL-331,MBALL-330,Design Python ML Training Pipeline,"Python environment setup with scikit-learn, xgboost, lightgbm. train_player_model.py accepting stat category and model type CLI args. Loads features from ML_PlayerFeatures view, handles NULLs, splits 70/15/15, scales features.",Critical,8,"python,ml,training,sprint-5"
Story,MBALL-332,MBALL-330,Implement Linear Regression Models,"LinearRegressionTrainer per stat category. Computes MAE, RMSE, R2. Saves model as pickle file. Baseline for comparison.",High,5,"linear-regression,ml,sprint-5"
Story,MBALL-333,MBALL-330,Implement Random Forest Models,RandomForestTrainer with GridSearchCV hyperparameter tuning. Extracts feature importance. 5-fold cross-validation. Saves model with metadata.,High,8,"random-forest,ml,sprint-5"
Story,MBALL-334,MBALL-330,Implement XGBoost Models,XGBoostTrainer with RandomizedSearchCV. Early stopping on validation set (early_stopping_rounds=10). Feature importance extracted. Model saved.,High,8,"xgboost,ml,sprint-6"
Story,MBALL-335,MBALL-330,Implement LightGBM Models,"LightGBMTrainer with categorical feature handling (position, IsHomeGame). Faster training than XGBoost. Hyperparameter grid. Model saved.",Medium,8,"lightgbm,ml,sprint-6"
Story,MBALL-336,MBALL-330,Build Model Comparison Framework,"ModelComparer class training all four model types for a stat category. Compares MAE/RMSE/R2, selects best by MAE, updates MLPlayerModels table IsBestModel flag.",High,5,"model-comparison,ml,sprint-6"
Story,MBALL-337,MBALL-330,Implement Model Persistence Service,"ModelPersistenceService saving models to /models directory with versioned filenames. Stores metadata (MAE, RMSE, R2, hyperparameters, feature importance) in MLPlayerModels. Loads by ID or stat category.",High,5,"model-persistence,ml,sprint-5"
Story,MBALL-338,MBALL-330,Create Cross-Validation Framework,CrossValidator with 5-fold TimeSeriesSplit (no future data leakage). CV mean and std MAE saved to database. Prevents overfitting.,Medium,5,"cross-validation,ml,sprint-6"
Story,MBALL-339,MBALL-330,Build Hyperparameter Tuning Pipeline,HyperparameterTuner with GridSearchCV for Random Forest and RandomizedSearchCV for XGBoost/LightGBM. Best parameters saved as JSON with model.,Medium,8,"hyperparameter-tuning,ml,sprint-6"
Story,MBALL-341,MBALL-340,Create Python Inference Service,"predict.py script accepting player-id, game-date, opponent, is-home CLI args. Loads best model and scaler, generates features for upcoming game, returns JSON predictions. Handles missing models gracefully.",Critical,8,"python,inference,prediction,sprint-7"
Story,MBALL-342,MBALL-340,Build C# Prediction Controller,"GET /api/predictions/player/{playerId} endpoint with gameDate, opponentTeamId, isHome query params. Calls predict.py via Process.Start, parses JSON, returns PlayerProjectionDto. Handles errors (200/404/500).",Critical,8,"api,controller,prediction,sprint-7"
Story,MBALL-343,MBALL-340,Implement Batch Prediction Endpoint,"POST /api/predictions/batch accepting array of PlayerPredictionRequest. Parallel.ForEach for concurrent predictions. Timeout per prediction, partial failure handling, progress reporting.",Medium,5,"batch,prediction,api,sprint-7"
Story,MBALL-344,MBALL-340,Create Prediction Caching Layer,PredictionCacheService using Redis or in-memory cache. Cache key: {playerId}_{gameDate}_{opponent}. 1-hour TTL. Invalidates on data ingestion. Cache hit/miss logging.,Medium,5,"caching,redis,prediction,sprint-7"
Story,MBALL-345,MBALL-340,Build Prediction Confidence Scoring,"ConfidenceCalculator producing 0-100 score based on model MAE, number of recent games, and minutes trend. Confidence field added to PlayerProjectionDto.",Low,5,"confidence,prediction,sprint-8"
Story,MBALL-346,MBALL-340,Implement Fallback Prediction Strategy,PythonInferenceService fallback: if model unavailable use season average; if no season stats use career average. IsModelPrediction flag in response. Logs fallback reason.,Medium,3,"fallback,prediction,sprint-7"
Story,MBALL-351,MBALL-350,Write Unit Tests for Player Entities,"Tests for Player, PlayerSeasonStat, PlayerGameStat entities. FluentAssertions, computed column tests, navigation property tests. 90%+ code coverage.",High,5,"unit-tests,entities,qa,sprint-8"
Story,MBALL-352,MBALL-350,Write Unit Tests for Ingestion Service,"Tests for IngestNBAPlayersAsync and IngestPlayerGameStatsAsync. Idempotency tests, DNP handling tests, minutes parsing tests. Mocked repository and API service. FluentAssertions.",High,8,"unit-tests,ingestion,qa,sprint-8"
Story,MBALL-353,MBALL-350,Write Unit Tests for Calculators,"Theory tests for DerivedStatCalculator (IsDoubleDouble, IsTripleDouble, CalculateRollingAverage) and DraftKingsFantasyCalculator (scoring, bonuses, penalties). Edge case coverage. FluentAssertions.",High,5,"unit-tests,calculators,qa,sprint-8"
Story,MBALL-354,MBALL-350,Write Integration Tests for ML Pipeline,"End-to-end tests: train and predict on 100-game sample dataset. Tests all model types (LR, RF, XGBoost), model comparison, best model selection, prediction within reasonable range.",Medium,8,"integration-tests,ml,qa,sprint-9"
Story,MBALL-355,MBALL-350,Write Integration Tests for Prediction API,"Tests for GetPlayerProjection, batch endpoint, caching (second call uses cache). Tests error handling: invalid player ID (404), model not found (fallback). Setup/teardown of test data.",Medium,5,"integration-tests,api,qa,sprint-9"
Story,MBALL-361,MBALL-360,Write Technical Documentation,"README.md covering database schema/relationships, API endpoints with request/response examples, ML training process, feature engineering logic, model comparison strategy, deployment guide, troubleshooting, performance benchmarks.",Medium,5,"documentation,sprint-9"
Story,MBALL-362,MBALL-360,Create Database Migration Scripts,"001_CreatePlayerTables.sql (Players, PlayerSeasonStats, PlayerGameStats, MLPlayerModels, ML_PlayerFeatures view, all indexes), 001_Rollback.sql, seed_test_data.sql. Idempotent, tested on clean database.",High,3,"migration,database,sprint-9"
Story,MBALL-363,MBALL-360,Setup Python Environment Script,"setup_ml_env.sh and setup_ml_env.ps1 creating virtual environment, installing pinned requirements, configuring DB connection string. Works on Ubuntu and Windows.",Medium,3,"python,environment,deployment,sprint-10"
Story,MBALL-364,MBALL-360,Create Monitoring Dashboard,"ModelMetricsDashboard.cshtml querying MLPlayerModels table. Shows MAE/RMSE/R2 per model, best model per stat, prediction accuracy trends chart, ingestion job status, error alerts.",Low,5,"monitoring,dashboard,sprint-10"